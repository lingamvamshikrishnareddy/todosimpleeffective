{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\todo list\\\\frontend\\\\src\\\\pages\\\\TaskPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Task from '../components/Task'; // Assuming path\nimport TaskKanban from '../components/TaskKanban'; // Assuming path\nimport { Helmet } from 'react-helmet';\nimport api from '../services/api'; // Assuming path\nimport './TaskPage.css'; // Assuming path\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DEBOUNCE_DELAY = 300;\nconst VALID_TASK_STATUSES_ARRAY = ['backlog', 'active', 'under-review', 'completed', 'archived'];\nconst DEFAULT_ACTIVE_STATUS = 'active';\nconst TASK_STATUSES = {\n  BACKLOG: 'backlog',\n  ACTIVE: 'active',\n  UNDER_REVIEW: 'under-review',\n  COMPLETED: 'completed',\n  ARCHIVED: 'archived'\n};\nconst TaskPage = () => {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [taskTitle, setTaskTitle] = useState('');\n  const [taskDescription, setTaskDescription] = useState('');\n  const [isEditing, setIsEditing] = useState(false);\n  const [currentTaskId, setCurrentTaskId] = useState(null);\n  const [filter, setFilter] = useState('all');\n  const [mainLoading, setMainLoading] = useState(true);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [totalPages, setTotalPages] = useState(1);\n  const [category, setCategory] = useState('');\n  const [priority, setPriority] = useState('');\n  const [dueDate, setDueDate] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [sortBy, setSortBy] = useState('createdAt:desc');\n  const [userProfile, setUserProfile] = useState(null);\n  const [loggingOut, setLoggingOut] = useState(false);\n  const [isFetching, setIsFetching] = useState(false); // For UI feedback during fetch\n  const [viewMode, setViewMode] = useState('kanban'); // Default to Kanban\n\n  const history = useHistory();\n  const debounceTimeoutRef = useRef(null);\n  const fetchingGuardRef = useRef(false); // Prevents re-entrant executeFetch calls\n\n  const parseApiError = (err, defaultMessage = 'An unexpected error occurred.') => {\n    let message = defaultMessage;\n    let details = '';\n    if ((err === null || err === void 0 ? void 0 : err.status) === 429) {\n      message = 'Too many requests. Please try again in a moment.';\n    } else if (err !== null && err !== void 0 && err.data) {\n      message = err.data.message || message;\n      details = err.data.detailedMessage || (typeof err.data.error === 'string' ? err.data.error : '');\n      if (!details && err.data.error && typeof err.data.error === 'object') {\n        details = Object.values(err.data.error).map(e => e.message || e).join('; ');\n      }\n    } else if (err !== null && err !== void 0 && err.message && !String(err.message).toLowerCase().includes('status code')) {\n      message = err.message;\n    }\n    return {\n      message,\n      details\n    };\n  };\n  useEffect(() => {\n    let isMounted = true;\n    const getUserProfile = async () => {\n      try {\n        const profile = await api.user.getProfile();\n        if (isMounted) setUserProfile(profile);\n      } catch (err) {\n        var _err$message;\n        console.error('Error fetching user profile:', err);\n        if (isMounted && ((err === null || err === void 0 ? void 0 : err.status) === 401 || err !== null && err !== void 0 && (_err$message = err.message) !== null && _err$message !== void 0 && _err$message.includes('unauthorized'))) {\n          history.push('/login');\n        }\n      }\n    };\n    getUserProfile();\n    return () => {\n      isMounted = false;\n    };\n  }, [history]);\n  const getStatusQueryParam = useCallback(() => {\n    if (filter === 'completed') return 'completed';\n    if (filter === 'active') return 'active';\n    return ''; // 'all', fetches all non-archived unless backend logic changes\n  }, [filter]);\n  const queryParams = useMemo(() => ({\n    page: viewMode === 'list' ? page : 1,\n    // Kanban always loads page 1 (all relevant tasks)\n    limit: viewMode === 'kanban' ? 100 : 10,\n    // Kanban might need more tasks\n    status: getStatusQueryParam(),\n    category: category || undefined,\n    search: searchQuery || undefined,\n    sortBy,\n    // SortBy might be less relevant for Kanban if it has its own ordering\n    priority: priority || undefined,\n    dueDate: dueDate || undefined\n  }), [page, viewMode, getStatusQueryParam, category, searchQuery, sortBy, priority, dueDate]);\n  const executeFetch = useCallback(async (showMainLoadingSpinner = true) => {\n    if (fetchingGuardRef.current) return; // Prevent re-entrant calls\n\n    fetchingGuardRef.current = true;\n    setIsFetching(true); // For UI feedback like disabling buttons\n    if (showMainLoadingSpinner) setMainLoading(true);\n    setError(null);\n    try {\n      const response = await api.tasks.getTasks(queryParams);\n      setTasks(response.tasks || []);\n      if (viewMode === 'list') {\n        var _response$pagination, _response$pagination2, _response$pagination3;\n        setTotalPages(((_response$pagination = response.pagination) === null || _response$pagination === void 0 ? void 0 : _response$pagination.pages) || 1);\n        if (page > (((_response$pagination2 = response.pagination) === null || _response$pagination2 === void 0 ? void 0 : _response$pagination2.pages) || 1) && (((_response$pagination3 = response.pagination) === null || _response$pagination3 === void 0 ? void 0 : _response$pagination3.pages) || 1) > 0) {\n          setPage(response.pagination.pages); // Adjust if current page is out of bounds\n        }\n      } else {\n        setTotalPages(1); // Kanban loads all relevant, so effectively 1 page\n      }\n    } catch (err) {\n      console.error('Error fetching tasks:', err);\n      const parsedError = parseApiError(err, 'Failed to load tasks.');\n      if ((err === null || err === void 0 ? void 0 : err.status) === 401) history.push('/login');else setError(parsedError);\n    } finally {\n      if (showMainLoadingSpinner) setMainLoading(false);\n      setIsFetching(false);\n      fetchingGuardRef.current = false;\n    }\n  }, [queryParams, history, viewMode, page]); // Added viewMode and page\n\n  useEffect(() => {\n    if (debounceTimeoutRef.current) clearTimeout(debounceTimeoutRef.current);\n    debounceTimeoutRef.current = setTimeout(() => {\n      executeFetch(true); // Show main loading spinner on debounced fetches\n    }, DEBOUNCE_DELAY);\n    return () => {\n      if (debounceTimeoutRef.current) clearTimeout(debounceTimeoutRef.current);\n    };\n  }, [executeFetch]); // executeFetch is the dependency\n\n  const resetForm = useCallback(() => {\n    setTaskTitle('');\n    setTaskDescription('');\n    // Do not reset category, priority, dueDate from form on cancel, only on successful add/edit\n    // setCategory(''); \n    // setPriority('');\n    // setDueDate('');\n    setIsEditing(false);\n    setCurrentTaskId(null);\n  }, []);\n  const clearFullForm = useCallback(() => {\n    setTaskTitle('');\n    setTaskDescription('');\n    setCategory('');\n    setPriority('');\n    setDueDate('');\n    setIsEditing(false);\n    setCurrentTaskId(null);\n  }, []);\n  const handleAddTask = async () => {\n    if (taskTitle.trim() === '') {\n      setError({\n        message: \"Task title cannot be empty.\"\n      });\n      return;\n    }\n    setIsSubmitting(true);\n    setError(null);\n    const taskPayload = {\n      title: taskTitle,\n      description: taskDescription,\n      category: category || undefined,\n      priority: priority || undefined,\n      dueDate: dueDate || undefined\n      // status is NOT sent; backend will default to 'active'\n    };\n    try {\n      if (isEditing && currentTaskId) {\n        const response = await api.tasks.updateTask(currentTaskId, taskPayload);\n        setTasks(prevTasks => prevTasks.map(t => (t._id || t.id) === currentTaskId ? response.task : t));\n      } else {\n        const response = await api.tasks.createTask(taskPayload);\n        // Add to local state optimistically (new task should have 'active' status from backend)\n        setTasks(prevTasks => [response.task, ...prevTasks]);\n      }\n      clearFullForm(); // Clear all form fields after successful operation\n      // No full executeFetch here to avoid jarring reload. UI updates optimistically.\n      // If specific data like total counts needs refresh, consider a targeted fetch or backend returning updated counts.\n    } catch (err) {\n      console.error('Error saving task:', err);\n      setError(parseApiError(err, `Failed to ${isEditing ? 'update' : 'create'} task.`));\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  const handleDeleteTask = async taskId => {\n    if (!taskId) return;\n    const originalTasks = [...tasks];\n    setTasks(prevTasks => prevTasks.filter(task => (task._id || task.id) !== taskId));\n    // No isSubmitting state for delete, it's per-task\n    setError(null);\n    try {\n      await api.tasks.deleteTask(taskId);\n      // Optionally, if pagination or total counts are critical and not updated otherwise:\n      // executeFetch(false); // Silent refresh\n    } catch (err) {\n      console.error('Error deleting task:', err);\n      setTasks(originalTasks); // Revert optimistic update\n      setError(parseApiError(err, 'Failed to delete task.'));\n    }\n  };\n  const handleEditTask = task => {\n    setIsEditing(true);\n    setCurrentTaskId(task._id || task.id);\n    setTaskTitle(task.title || '');\n    setTaskDescription(task.description || '');\n    setCategory(task.category || '');\n    setPriority(task.priority || '');\n    setDueDate(task.dueDate ? new Date(task.dueDate).toISOString().split('T')[0] : '');\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  };\n  const handleToggleComplete = async taskId => {\n    if (!taskId) return;\n    const originalTasks = [...tasks];\n    let updatedTaskData = null;\n    setTasks(prevTasks => prevTasks.map(task => {\n      if ((task._id || task.id) === taskId) {\n        const newStatus = task.status === TASK_STATUSES.COMPLETED ? DEFAULT_ACTIVE_STATUS : TASK_STATUSES.COMPLETED;\n        updatedTaskData = {\n          ...task,\n          status: newStatus,\n          completedAt: newStatus === TASK_STATUSES.COMPLETED ? new Date().toISOString() : null\n        };\n        return updatedTaskData;\n      }\n      return task;\n    }));\n    setError(null);\n    try {\n      const response = await api.tasks.toggleTaskStatus(taskId);\n      // Sync with potentially more complete data from backend if needed\n      setTasks(prevTasks => prevTasks.map(t => (t._id || t.id) === taskId ? response.task : t));\n    } catch (err) {\n      console.error('Error toggling task status:', err);\n      setTasks(originalTasks); // Revert\n      setError(parseApiError(err, 'Failed to update task status.'));\n    }\n  };\n  const handleStatusChange = async (taskId, newStatus) => {\n    if (!taskId || !VALID_TASK_STATUSES_ARRAY.includes(newStatus)) {\n      setError({\n        message: 'Invalid data for status update.'\n      });\n      return;\n    }\n    const originalTasks = [...tasks];\n    const taskToUpdateOriginal = originalTasks.find(t => (t._id || t.id) === taskId);\n    if (!taskToUpdateOriginal) return;\n    setTasks(prevTasks => prevTasks.map(task => (task._id || task.id) === taskId ? {\n      ...task,\n      status: newStatus,\n      completedAt: newStatus === TASK_STATUSES.COMPLETED ? new Date().toISOString() : taskToUpdateOriginal.status === TASK_STATUSES.COMPLETED ? null : task.completedAt // Handle completedAt\n    } : task));\n    setError(null);\n    try {\n      const response = await api.tasks.updateTask(taskId, {\n        status: newStatus\n      });\n      // Sync with backend response for full accuracy\n      setTasks(prevTasks => prevTasks.map(t => (t._id || t.id) === taskId ? response.task : t));\n    } catch (err) {\n      console.error(`Error updating task ${taskId} to status ${newStatus}:`, err);\n      setTasks(originalTasks); // Revert optimistic update\n      setError(parseApiError(err, `Failed to update status for task \"${taskToUpdateOriginal.title || taskId}\".`));\n      // Consider a silent executeFetch(false) here if Kanban gets out of sync badly on error\n    }\n  };\n  const handleSearchSubmit = e => {\n    e.preventDefault();\n    setPage(1); // Reset to page 1 on new search\n    executeFetch(true); // Trigger fetch, show main loading spinner\n  };\n  const handleClearFiltersAndSearch = () => {\n    setFilter('all');\n    // Keep category, priority, dueDate from form for user convenience\n    // setCategory('');\n    // setPriority('');\n    // setDueDate('');\n    setSearchQuery('');\n    setSortBy('createdAt:desc');\n    setPage(1);\n    // executeFetch will be triggered by useEffect due to queryParams change\n  };\n  const handlePageChange = newPage => {\n    if (newPage >= 1 && newPage <= totalPages && newPage !== page && viewMode === 'list') {\n      setPage(newPage);\n      // executeFetch will be triggered by useEffect\n    }\n  };\n  const handleLogout = async () => {\n    setLoggingOut(true);\n    setError(null);\n    try {\n      await api.auth.logout();\n      history.push('/login');\n    } catch (err) {\n      console.error('Logout error:', err);\n      setError(parseApiError(err, 'Logout failed.'));\n      setLoggingOut(false);\n    }\n  };\n  const activeTaskCount = useMemo(() => {\n    return tasks.filter(task => ![TASK_STATUSES.COMPLETED, TASK_STATUSES.ARCHIVED].includes(task.status)).length;\n  }, [tasks]);\n  const completedTaskCount = useMemo(() => {\n    return tasks.filter(task => task.status === TASK_STATUSES.COMPLETED).length;\n  }, [tasks]);\n\n  // Effect to reset page to 1 if viewMode changes to Kanban, or if filters change that affect total pages\n  useEffect(() => {\n    if (viewMode === 'kanban') {\n      setPage(1); // Kanban view loads all items, conceptually page 1\n    }\n    // If other specific filter changes necessitate page reset, handle here\n  }, [viewMode, filter, searchQuery, category, priority, dueDate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: `TaskFlow - ${isEditing ? 'Edit Task' : taskTitle || 'Manage Tasks'}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: \"Create, organize, and track your tasks efficiently with TaskFlow.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container task-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"header task-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo-section\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"app-logo\",\n            children: \"TaskFlow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this), userProfile && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"welcome-text\",\n              children: [\"Welcome, \", userProfile.name || 'User']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"user-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"/profile\",\n                className: \"profile-link\",\n                onClick: e => {\n                  e.preventDefault();\n                  history.push('/profile');\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-user-circle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 21\n                }, this), \" My Profile\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"logout-button\",\n                onClick: handleLogout,\n                disabled: loggingOut || isSubmitting,\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fa ${loggingOut ? 'fa-spinner fa-spin' : 'fa-sign-out'}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 21\n                }, this), \" \", loggingOut ? 'Logging out...' : 'Logout']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"content-area\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"page-title visually-hidden\",\n          children: \"Task Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-message global-error\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-exclamation-circle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 20\n              }, this), \" \", error.message]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this), error.details && /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"error-details\",\n              children: error.details\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setError(null),\n            \"aria-label\": \"Dismiss error message\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"card task-form-card\",\n          \"aria-labelledby\": \"task-form-title\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            id: \"task-form-title\",\n            className: \"card-title\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fa fa-pencil-square-o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this), \" \", isEditing ? 'Edit Task' : 'Add New Task']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: e => {\n              e.preventDefault();\n              handleAddTask();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"taskTitle\",\n                children: [\"Task Title \", /*#__PURE__*/_jsxDEV(\"span\", {\n                  \"aria-hidden\": \"true\",\n                  children: \"*\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 55\n                }, this), \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"taskTitle\",\n                type: \"text\",\n                value: taskTitle,\n                onChange: e => setTaskTitle(e.target.value),\n                placeholder: \"e.g., Finish project report\",\n                className: \"form-input\",\n                required: true,\n                \"aria-required\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"taskDescription\",\n                children: \"Description:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                id: \"taskDescription\",\n                value: taskDescription,\n                onChange: e => setTaskDescription(e.target.value),\n                placeholder: \"Add more details...\",\n                className: \"form-textarea\",\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group half-width\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"taskCategory\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-tag\",\n                    \"aria-hidden\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 49\n                  }, this), \" Category:\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"taskCategory\",\n                  type: \"text\",\n                  value: category,\n                  onChange: e => setCategory(e.target.value),\n                  placeholder: \"e.g., Work, Personal\",\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group half-width\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"taskPriority\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-flag\",\n                    \"aria-hidden\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 423,\n                    columnNumber: 49\n                  }, this), \" Priority:\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"taskPriority\",\n                  value: priority,\n                  onChange: e => setPriority(e.target.value),\n                  className: \"form-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Default (Medium)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"low\",\n                    children: \"Low\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"medium\",\n                    children: \"Medium\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"high\",\n                    children: \"High\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"taskDueDate\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-calendar\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 46\n                }, this), \" Due Date:\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 436,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"taskDueDate\",\n                type: \"date\",\n                value: dueDate,\n                onChange: e => setDueDate(e.target.value),\n                className: \"form-input\",\n                min: new Date().toISOString().split(\"T\")[0] // Optional: prevent past dates\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"button-row\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"button primary-button\",\n                disabled: isSubmitting || !taskTitle.trim(),\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: `fa ${isSubmitting ? 'fa-spinner fa-spin' : isEditing ? 'fa-save' : 'fa-plus-circle'}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 19\n                }, this), isSubmitting ? isEditing ? 'Updating...' : 'Adding...' : isEditing ? 'Update Task' : 'Add Task']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 17\n              }, this), isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"button secondary-button\",\n                onClick: clearFullForm,\n                disabled: isSubmitting,\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-times-circle\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 453,\n                  columnNumber: 21\n                }, this), \" Cancel Edit\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"view-toggle-container card\",\n          \"aria-label\": \"View mode and filters\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"view-toggle\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `view-button ${viewMode === 'list' ? 'active' : ''}`,\n              onClick: () => setViewMode('list'),\n              disabled: isFetching || mainLoading // Disable during any fetch/load\n              ,\n              \"aria-pressed\": viewMode === 'list',\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-list\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 468,\n                columnNumber: 17\n              }, this), \" List View\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `view-button ${viewMode === 'kanban' ? 'active' : ''}`,\n              onClick: () => setViewMode('kanban'),\n              disabled: isFetching || mainLoading,\n              \"aria-pressed\": viewMode === 'kanban',\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-columns\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 476,\n                columnNumber: 17\n              }, this), \" Kanban View\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 470,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-controls\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSearchSubmit,\n              className: \"search-form\",\n              role: \"search\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"search-input-wrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"searchQueryInput\",\n                  className: \"visually-hidden\",\n                  children: \"Search tasks\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  id: \"searchQueryInput\",\n                  type: \"search\",\n                  placeholder: \"Search tasks...\",\n                  value: searchQuery,\n                  onChange: e => setSearchQuery(e.target.value),\n                  className: \"form-input search-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"submit\",\n                  className: \"search-button\",\n                  disabled: isFetching || mainLoading,\n                  \"aria-label\": \"Submit search\",\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 490,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 489,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"advanced-filters\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"filter-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"filterStatus\",\n                  children: \"Filter by Status:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 496,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"filterStatus\",\n                  value: filter,\n                  onChange: e => {\n                    setFilter(e.target.value);\n                    setPage(1);\n                  },\n                  className: \"form-select filter-select\",\n                  disabled: isFetching || mainLoading,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"all\",\n                    children: \"All (Active & Open)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"active\",\n                    children: \"Active Tasks\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 504,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"completed\",\n                    children: \"Completed Tasks\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 505,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 497,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 17\n              }, this), viewMode === 'list' &&\n              /*#__PURE__*/\n              // SortBy is more relevant for list view\n              _jsxDEV(\"div\", {\n                className: \"filter-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"filterSort\",\n                  children: \"Sort By:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  id: \"filterSort\",\n                  value: sortBy,\n                  onChange: e => {\n                    setSortBy(e.target.value);\n                    setPage(1);\n                  },\n                  className: \"form-select filter-select\",\n                  disabled: isFetching || mainLoading,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"createdAt:desc\",\n                    children: \"Newest First\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 518,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"createdAt:asc\",\n                    children: \"Oldest First\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 519,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"title:asc\",\n                    children: \"Title (A-Z)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 520,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"title:desc\",\n                    children: \"Title (Z-A)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 521,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"priority:desc\",\n                    children: \"Priority (High-Low)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 522,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"priority:asc\",\n                    children: \"Priority (Low-High)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 523,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"dueDate:asc\",\n                    children: \"Due Date (Earliest)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 524,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"dueDate:desc\",\n                    children: \"Due Date (Latest)\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 512,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"button-link clear-filters-button\",\n                onClick: handleClearFiltersAndSearch,\n                disabled: isFetching || mainLoading,\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-times\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 530,\n                  columnNumber: 19\n                }, this), \" Clear Search & Filters\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 529,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"task-content-container\",\n          children: mainLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-container main-loader\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-spinner\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-spinner fa-spin fa-3x\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Loading tasks...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: viewMode === 'kanban' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"kanban-container\",\n              children: /*#__PURE__*/_jsxDEV(TaskKanban, {\n                tasks: tasks // Ensure tasks are correctly filtered for Kanban if needed, or Kanban handles all open tasks\n                ,\n                onEdit: handleEditTask,\n                onDelete: handleDeleteTask,\n                onStatusChange: handleStatusChange\n                // Pass column order explicitly if TaskKanban expects it\n                // columnOrder={[TASK_STATUSES.BACKLOG, TASK_STATUSES.ACTIVE, TASK_STATUSES.UNDER_REVIEW, TASK_STATUSES.COMPLETED]}\n                ,\n                isLoading: isFetching // Pass fetching state for individual column loaders perhaps\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 19\n            }, this) :\n            /*#__PURE__*/\n            // List View\n            _jsxDEV(\"div\", {\n              className: \"list-container\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"task-stats\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"task-count total\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-th-list\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 25\n                  }, this), \" \", tasks.length, \" tasks displayed\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 561,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"task-count active\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-clock-o\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 565,\n                    columnNumber: 25\n                  }, this), \" \", activeTaskCount, \" active\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 564,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"task-count completed\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-check-square-o\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 568,\n                    columnNumber: 25\n                  }, this), \" \", completedTaskCount, \" completed\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 567,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 560,\n                columnNumber: 21\n              }, this), tasks.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"empty-state\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fa fa-folder-open-o empty-icon fa-3x\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 573,\n                  columnNumber: 26\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: searchQuery || filter !== 'all' ? 'No tasks match your current filters.' : 'No tasks yet. Add one above to get started!'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 574,\n                  columnNumber: 26\n                }, this), (searchQuery || filter !== 'all') && /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"button secondary-button\",\n                  onClick: handleClearFiltersAndSearch,\n                  children: \"Clear Filters & Search\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 576,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 572,\n                columnNumber: 24\n              }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"task-list\",\n                children: tasks.map(task => /*#__PURE__*/_jsxDEV(Task, {\n                  task: task,\n                  onToggleComplete: () => handleToggleComplete(task._id || task.id),\n                  onEdit: () => handleEditTask(task),\n                  onDelete: () => handleDeleteTask(task._id || task.id)\n                }, task._id || task.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 584,\n                  columnNumber: 29\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 582,\n                columnNumber: 25\n              }, this), totalPages > 1 && viewMode === 'list' && /*#__PURE__*/_jsxDEV(\"nav\", {\n                className: \"pagination\",\n                \"aria-label\": \"Task list navigation\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"pagination-button prev\",\n                  onClick: () => handlePageChange(page - 1),\n                  disabled: page === 1 || isFetching,\n                  \"aria-label\": \"Go to previous page\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-chevron-left\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 602,\n                    columnNumber: 27\n                  }, this), \" Previous\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 596,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"pagination-info\",\n                  \"aria-live\": \"polite\",\n                  \"aria-atomic\": \"true\",\n                  children: [\"Page \", page, \" of \", totalPages]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"pagination-button next\",\n                  onClick: () => handlePageChange(page + 1),\n                  disabled: page === totalPages || isFetching,\n                  \"aria-label\": \"Go to next page\",\n                  children: [\"Next \", /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-chevron-right\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 611,\n                    columnNumber: 32\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 605,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 595,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 559,\n              columnNumber: 19\n            }, this)\n          }, void 0, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n        className: \"app-footer\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\xA9 \", new Date().getFullYear(), \" TaskFlow App. All rights reserved.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 623,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 622,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(TaskPage, \"r/OAXAAmyLWq17dtVHmUGBTH7Cs=\", false, function () {\n  return [useHistory];\n});\n_c = TaskPage;\nexport default TaskPage;\nvar _c;\n$RefreshReg$(_c, \"TaskPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useMemo","useRef","useHistory","Task","TaskKanban","Helmet","api","jsxDEV","_jsxDEV","Fragment","_Fragment","DEBOUNCE_DELAY","VALID_TASK_STATUSES_ARRAY","DEFAULT_ACTIVE_STATUS","TASK_STATUSES","BACKLOG","ACTIVE","UNDER_REVIEW","COMPLETED","ARCHIVED","TaskPage","_s","tasks","setTasks","taskTitle","setTaskTitle","taskDescription","setTaskDescription","isEditing","setIsEditing","currentTaskId","setCurrentTaskId","filter","setFilter","mainLoading","setMainLoading","isSubmitting","setIsSubmitting","error","setError","page","setPage","totalPages","setTotalPages","category","setCategory","priority","setPriority","dueDate","setDueDate","searchQuery","setSearchQuery","sortBy","setSortBy","userProfile","setUserProfile","loggingOut","setLoggingOut","isFetching","setIsFetching","viewMode","setViewMode","history","debounceTimeoutRef","fetchingGuardRef","parseApiError","err","defaultMessage","message","details","status","data","detailedMessage","Object","values","map","e","join","String","toLowerCase","includes","isMounted","getUserProfile","profile","user","getProfile","_err$message","console","push","getStatusQueryParam","queryParams","limit","undefined","search","executeFetch","showMainLoadingSpinner","current","response","getTasks","_response$pagination","_response$pagination2","_response$pagination3","pagination","pages","parsedError","clearTimeout","setTimeout","resetForm","clearFullForm","handleAddTask","trim","taskPayload","title","description","updateTask","prevTasks","t","_id","id","task","createTask","handleDeleteTask","taskId","originalTasks","deleteTask","handleEditTask","Date","toISOString","split","window","scrollTo","top","behavior","handleToggleComplete","updatedTaskData","newStatus","completedAt","toggleTaskStatus","handleStatusChange","taskToUpdateOriginal","find","handleSearchSubmit","preventDefault","handleClearFiltersAndSearch","handlePageChange","newPage","handleLogout","auth","logout","activeTaskCount","length","completedTaskCount","children","fileName","_jsxFileName","lineNumber","columnNumber","name","content","className","href","onClick","disabled","onSubmit","htmlFor","type","value","onChange","target","placeholder","required","rows","min","role","onEdit","onDelete","onStatusChange","isLoading","onToggleComplete","getFullYear","_c","$RefreshReg$"],"sources":["D:/Projects/todo list/frontend/src/pages/TaskPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Task from '../components/Task'; // Assuming path\r\nimport TaskKanban from '../components/TaskKanban'; // Assuming path\r\nimport { Helmet } from 'react-helmet';\r\nimport api from '../services/api'; // Assuming path\r\nimport './TaskPage.css'; // Assuming path\r\n\r\nconst DEBOUNCE_DELAY = 300;\r\nconst VALID_TASK_STATUSES_ARRAY = ['backlog', 'active', 'under-review', 'completed', 'archived'];\r\nconst DEFAULT_ACTIVE_STATUS = 'active';\r\n\r\nconst TASK_STATUSES = {\r\n  BACKLOG: 'backlog',\r\n  ACTIVE: 'active',\r\n  UNDER_REVIEW: 'under-review',\r\n  COMPLETED: 'completed',\r\n  ARCHIVED: 'archived',\r\n};\r\n\r\nconst TaskPage = () => {\r\n  const [tasks, setTasks] = useState([]);\r\n  const [taskTitle, setTaskTitle] = useState('');\r\n  const [taskDescription, setTaskDescription] = useState('');\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [currentTaskId, setCurrentTaskId] = useState(null);\r\n  const [filter, setFilter] = useState('all');\r\n  const [mainLoading, setMainLoading] = useState(true);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [category, setCategory] = useState('');\r\n  const [priority, setPriority] = useState('');\r\n  const [dueDate, setDueDate] = useState('');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [sortBy, setSortBy] = useState('createdAt:desc');\r\n  const [userProfile, setUserProfile] = useState(null);\r\n  const [loggingOut, setLoggingOut] = useState(false);\r\n  const [isFetching, setIsFetching] = useState(false); // For UI feedback during fetch\r\n  const [viewMode, setViewMode] = useState('kanban'); // Default to Kanban\r\n  \r\n  const history = useHistory();\r\n  const debounceTimeoutRef = useRef(null);\r\n  const fetchingGuardRef = useRef(false); // Prevents re-entrant executeFetch calls\r\n\r\n  const parseApiError = (err, defaultMessage = 'An unexpected error occurred.') => {\r\n    let message = defaultMessage;\r\n    let details = '';\r\n    if (err?.status === 429) {\r\n      message = 'Too many requests. Please try again in a moment.';\r\n    } else if (err?.data) {\r\n      message = err.data.message || message;\r\n      details = err.data.detailedMessage || (typeof err.data.error === 'string' ? err.data.error : '');\r\n      if (!details && err.data.error && typeof err.data.error === 'object') {\r\n        details = Object.values(err.data.error).map(e => e.message || e).join('; ');\r\n      }\r\n    } else if (err?.message && !String(err.message).toLowerCase().includes('status code')) {\r\n        message = err.message;\r\n    }\r\n    return { message, details };\r\n  };\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    const getUserProfile = async () => {\r\n      try {\r\n        const profile = await api.user.getProfile();\r\n        if (isMounted) setUserProfile(profile);\r\n      } catch (err) {\r\n        console.error('Error fetching user profile:', err);\r\n        if (isMounted && (err?.status === 401 || err?.message?.includes('unauthorized'))) {\r\n          history.push('/login');\r\n        }\r\n      }\r\n    };\r\n    getUserProfile();\r\n    return () => { isMounted = false; };\r\n  }, [history]);\r\n\r\n  const getStatusQueryParam = useCallback(() => {\r\n    if (filter === 'completed') return 'completed';\r\n    if (filter === 'active') return 'active';\r\n    return ''; // 'all', fetches all non-archived unless backend logic changes\r\n  }, [filter]);\r\n\r\n  const queryParams = useMemo(() => ({\r\n    page: viewMode === 'list' ? page : 1, // Kanban always loads page 1 (all relevant tasks)\r\n    limit: viewMode === 'kanban' ? 100 : 10, // Kanban might need more tasks\r\n    status: getStatusQueryParam(),\r\n    category: category || undefined,\r\n    search: searchQuery || undefined,\r\n    sortBy, // SortBy might be less relevant for Kanban if it has its own ordering\r\n    priority: priority || undefined,\r\n    dueDate: dueDate || undefined,\r\n  }), [page, viewMode, getStatusQueryParam, category, searchQuery, sortBy, priority, dueDate]);\r\n\r\n  const executeFetch = useCallback(async (showMainLoadingSpinner = true) => {\r\n    if (fetchingGuardRef.current) return; // Prevent re-entrant calls\r\n\r\n    fetchingGuardRef.current = true;\r\n    setIsFetching(true); // For UI feedback like disabling buttons\r\n    if (showMainLoadingSpinner) setMainLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await api.tasks.getTasks(queryParams);\r\n      setTasks(response.tasks || []);\r\n      if (viewMode === 'list') {\r\n        setTotalPages(response.pagination?.pages || 1);\r\n        if (page > (response.pagination?.pages || 1) && (response.pagination?.pages || 1) > 0) {\r\n            setPage(response.pagination.pages); // Adjust if current page is out of bounds\r\n        }\r\n      } else {\r\n        setTotalPages(1); // Kanban loads all relevant, so effectively 1 page\r\n      }\r\n    } catch (err) {\r\n      console.error('Error fetching tasks:', err);\r\n      const parsedError = parseApiError(err, 'Failed to load tasks.');\r\n      if (err?.status === 401) history.push('/login');\r\n      else setError(parsedError);\r\n    } finally {\r\n      if (showMainLoadingSpinner) setMainLoading(false);\r\n      setIsFetching(false);\r\n      fetchingGuardRef.current = false;\r\n    }\r\n  }, [queryParams, history, viewMode, page]); // Added viewMode and page\r\n\r\n  useEffect(() => {\r\n    if (debounceTimeoutRef.current) clearTimeout(debounceTimeoutRef.current);\r\n    debounceTimeoutRef.current = setTimeout(() => {\r\n      executeFetch(true); // Show main loading spinner on debounced fetches\r\n    }, DEBOUNCE_DELAY);\r\n    return () => { if (debounceTimeoutRef.current) clearTimeout(debounceTimeoutRef.current); };\r\n  }, [executeFetch]); // executeFetch is the dependency\r\n\r\n  const resetForm = useCallback(() => {\r\n    setTaskTitle('');\r\n    setTaskDescription('');\r\n    // Do not reset category, priority, dueDate from form on cancel, only on successful add/edit\r\n    // setCategory(''); \r\n    // setPriority('');\r\n    // setDueDate('');\r\n    setIsEditing(false);\r\n    setCurrentTaskId(null);\r\n  }, []);\r\n  \r\n  const clearFullForm = useCallback(() => {\r\n    setTaskTitle('');\r\n    setTaskDescription('');\r\n    setCategory(''); \r\n    setPriority('');\r\n    setDueDate('');\r\n    setIsEditing(false);\r\n    setCurrentTaskId(null);\r\n  }, []);\r\n\r\n\r\n  const handleAddTask = async () => {\r\n    if (taskTitle.trim() === '') {\r\n      setError({ message: \"Task title cannot be empty.\" });\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    \r\n    const taskPayload = {\r\n      title: taskTitle,\r\n      description: taskDescription,\r\n      category: category || undefined,\r\n      priority: priority || undefined,\r\n      dueDate: dueDate || undefined,\r\n      // status is NOT sent; backend will default to 'active'\r\n    };\r\n\r\n    try {\r\n      if (isEditing && currentTaskId) {\r\n        const response = await api.tasks.updateTask(currentTaskId, taskPayload);\r\n        setTasks(prevTasks => prevTasks.map(t => (t._id || t.id) === currentTaskId ? response.task : t));\r\n      } else {\r\n        const response = await api.tasks.createTask(taskPayload);\r\n        // Add to local state optimistically (new task should have 'active' status from backend)\r\n        setTasks(prevTasks => [response.task, ...prevTasks]);\r\n      }\r\n      clearFullForm(); // Clear all form fields after successful operation\r\n      // No full executeFetch here to avoid jarring reload. UI updates optimistically.\r\n      // If specific data like total counts needs refresh, consider a targeted fetch or backend returning updated counts.\r\n    } catch (err) {\r\n      console.error('Error saving task:', err);\r\n      setError(parseApiError(err, `Failed to ${isEditing ? 'update' : 'create'} task.`));\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteTask = async (taskId) => {\r\n    if (!taskId) return;\r\n    \r\n    const originalTasks = [...tasks];\r\n    setTasks(prevTasks => prevTasks.filter(task => (task._id || task.id) !== taskId));\r\n    // No isSubmitting state for delete, it's per-task\r\n    setError(null);\r\n\r\n    try {\r\n      await api.tasks.deleteTask(taskId);\r\n      // Optionally, if pagination or total counts are critical and not updated otherwise:\r\n      // executeFetch(false); // Silent refresh\r\n    } catch (err) {\r\n      console.error('Error deleting task:', err);\r\n      setTasks(originalTasks); // Revert optimistic update\r\n      setError(parseApiError(err, 'Failed to delete task.'));\r\n    }\r\n  };\r\n\r\n  const handleEditTask = (task) => {\r\n    setIsEditing(true);\r\n    setCurrentTaskId(task._id || task.id);\r\n    setTaskTitle(task.title || '');\r\n    setTaskDescription(task.description || '');\r\n    setCategory(task.category || '');\r\n    setPriority(task.priority || '');\r\n    setDueDate(task.dueDate ? new Date(task.dueDate).toISOString().split('T')[0] : '');\r\n    window.scrollTo({ top: 0, behavior: 'smooth' });\r\n  };\r\n\r\n  const handleToggleComplete = async (taskId) => {\r\n    if (!taskId) return;\r\n    \r\n    const originalTasks = [...tasks];\r\n    let updatedTaskData = null;\r\n\r\n    setTasks(prevTasks =>\r\n      prevTasks.map(task => {\r\n        if ((task._id || task.id) === taskId) {\r\n          const newStatus = task.status === TASK_STATUSES.COMPLETED ? DEFAULT_ACTIVE_STATUS : TASK_STATUSES.COMPLETED;\r\n          updatedTaskData = { \r\n            ...task, \r\n            status: newStatus,\r\n            completedAt: newStatus === TASK_STATUSES.COMPLETED ? new Date().toISOString() : null \r\n          };\r\n          return updatedTaskData;\r\n        }\r\n        return task;\r\n      })\r\n    );\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await api.tasks.toggleTaskStatus(taskId);\r\n      // Sync with potentially more complete data from backend if needed\r\n      setTasks(prevTasks => prevTasks.map(t => (t._id || t.id) === taskId ? response.task : t));\r\n    } catch (err) {\r\n      console.error('Error toggling task status:', err);\r\n      setTasks(originalTasks); // Revert\r\n      setError(parseApiError(err, 'Failed to update task status.'));\r\n    }\r\n  };\r\n\r\n  const handleStatusChange = async (taskId, newStatus) => {\r\n    if (!taskId || !VALID_TASK_STATUSES_ARRAY.includes(newStatus)) {\r\n      setError({ message: 'Invalid data for status update.' });\r\n      return;\r\n    }\r\n\r\n    const originalTasks = [...tasks];\r\n    const taskToUpdateOriginal = originalTasks.find(t => (t._id || t.id) === taskId);\r\n    if (!taskToUpdateOriginal) return;\r\n\r\n    setTasks(prevTasks =>\r\n      prevTasks.map(task =>\r\n        (task._id || task.id) === taskId \r\n        ? { ...task, \r\n            status: newStatus,\r\n            completedAt: newStatus === TASK_STATUSES.COMPLETED ? new Date().toISOString() : (taskToUpdateOriginal.status === TASK_STATUSES.COMPLETED ? null : task.completedAt) // Handle completedAt\r\n          } \r\n        : task\r\n      )\r\n    );\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await api.tasks.updateTask(taskId, { status: newStatus });\r\n      // Sync with backend response for full accuracy\r\n      setTasks(prevTasks => prevTasks.map(t => (t._id || t.id) === taskId ? response.task : t));\r\n    } catch (err) {\r\n      console.error(`Error updating task ${taskId} to status ${newStatus}:`, err);\r\n      setTasks(originalTasks); // Revert optimistic update\r\n      setError(parseApiError(err, `Failed to update status for task \"${taskToUpdateOriginal.title || taskId}\".`));\r\n      // Consider a silent executeFetch(false) here if Kanban gets out of sync badly on error\r\n    }\r\n  };\r\n  \r\n  const handleSearchSubmit = (e) => {\r\n    e.preventDefault();\r\n    setPage(1); // Reset to page 1 on new search\r\n    executeFetch(true); // Trigger fetch, show main loading spinner\r\n  };\r\n\r\n  const handleClearFiltersAndSearch = () => {\r\n    setFilter('all');\r\n    // Keep category, priority, dueDate from form for user convenience\r\n    // setCategory('');\r\n    // setPriority('');\r\n    // setDueDate('');\r\n    setSearchQuery('');\r\n    setSortBy('createdAt:desc');\r\n    setPage(1);\r\n    // executeFetch will be triggered by useEffect due to queryParams change\r\n  };\r\n\r\n  const handlePageChange = (newPage) => {\r\n    if (newPage >= 1 && newPage <= totalPages && newPage !== page && viewMode === 'list') {\r\n      setPage(newPage);\r\n      // executeFetch will be triggered by useEffect\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    setLoggingOut(true);\r\n    setError(null);\r\n    try {\r\n      await api.auth.logout();\r\n      history.push('/login');\r\n    } catch (err) {\r\n      console.error('Logout error:', err);\r\n      setError(parseApiError(err, 'Logout failed.'));\r\n      setLoggingOut(false);\r\n    }\r\n  };\r\n  \r\n  const activeTaskCount = useMemo(() => {\r\n    return tasks.filter(task => ![TASK_STATUSES.COMPLETED, TASK_STATUSES.ARCHIVED].includes(task.status)).length;\r\n  }, [tasks]);\r\n  \r\n  const completedTaskCount = useMemo(() => {\r\n    return tasks.filter(task => task.status === TASK_STATUSES.COMPLETED).length;\r\n  }, [tasks]);\r\n\r\n  // Effect to reset page to 1 if viewMode changes to Kanban, or if filters change that affect total pages\r\n  useEffect(() => {\r\n    if (viewMode === 'kanban') {\r\n        setPage(1); // Kanban view loads all items, conceptually page 1\r\n    }\r\n    // If other specific filter changes necessitate page reset, handle here\r\n  }, [viewMode, filter, searchQuery, category, priority, dueDate]);\r\n\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{`TaskFlow - ${isEditing ? 'Edit Task' : (taskTitle || 'Manage Tasks')}`}</title>\r\n        <meta name=\"description\" content=\"Create, organize, and track your tasks efficiently with TaskFlow.\" />\r\n      </Helmet>\r\n\r\n      <div className=\"container task-page-container\">\r\n        <header className=\"header task-header\">\r\n          <div className=\"logo-section\">\r\n            <h1 className=\"app-logo\">TaskFlow</h1>\r\n          </div>\r\n          {userProfile && (\r\n            <div className=\"user-controls\">\r\n              <div className=\"user-info\">\r\n                <span className=\"welcome-text\">Welcome, {userProfile.name || 'User'}</span>\r\n                <div className=\"user-actions\">\r\n                  {/* Use Link from react-router-dom if profile is an internal route */}\r\n                  <a href=\"/profile\" className=\"profile-link\" onClick={(e) => { e.preventDefault(); history.push('/profile');}}> \r\n                    <i className=\"fa fa-user-circle\"></i> My Profile\r\n                  </a>\r\n                  <button className=\"logout-button\" onClick={handleLogout} disabled={loggingOut || isSubmitting}>\r\n                    <i className={`fa ${loggingOut ? 'fa-spinner fa-spin' : 'fa-sign-out'}`}></i> {loggingOut ? 'Logging out...' : 'Logout'}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </header>\r\n\r\n        <main className=\"content-area\">\r\n          <h1 className=\"page-title visually-hidden\">Task Management</h1>\r\n\r\n          {error && (\r\n            <div className=\"error-message global-error\">\r\n              <div>\r\n                <p><i className=\"fa fa-exclamation-circle\"></i> {error.message}</p>\r\n                {error.details && <small className=\"error-details\">{error.details}</small>}\r\n              </div>\r\n              <button onClick={() => setError(null)} aria-label=\"Dismiss error message\"></button>\r\n            </div>\r\n          )}\r\n\r\n          <section className=\"card task-form-card\" aria-labelledby=\"task-form-title\">\r\n            <h2 id=\"task-form-title\" className=\"card-title\">\r\n              <i className=\"fa fa-pencil-square-o\"></i> {isEditing ? 'Edit Task' : 'Add New Task'}\r\n            </h2>\r\n            <form onSubmit={(e) => { e.preventDefault(); handleAddTask(); }}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"taskTitle\">Task Title <span aria-hidden=\"true\">*</span>:</label>\r\n                <input\r\n                  id=\"taskTitle\" type=\"text\" value={taskTitle}\r\n                  onChange={(e) => setTaskTitle(e.target.value)}\r\n                  placeholder=\"e.g., Finish project report\" className=\"form-input\" required\r\n                  aria-required=\"true\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"taskDescription\">Description:</label>\r\n                <textarea\r\n                  id=\"taskDescription\" value={taskDescription}\r\n                  onChange={(e) => setTaskDescription(e.target.value)}\r\n                  placeholder=\"Add more details...\" className=\"form-textarea\" rows=\"3\"\r\n                />\r\n              </div>\r\n              <div className=\"form-row\">\r\n                <div className=\"form-group half-width\">\r\n                  <label htmlFor=\"taskCategory\"><i className=\"fa fa-tag\" aria-hidden=\"true\"></i> Category:</label>\r\n                  <input\r\n                    id=\"taskCategory\" type=\"text\" value={category}\r\n                    onChange={(e) => setCategory(e.target.value)}\r\n                    placeholder=\"e.g., Work, Personal\" className=\"form-input\"\r\n                  />\r\n                </div>\r\n                <div className=\"form-group half-width\">\r\n                  <label htmlFor=\"taskPriority\"><i className=\"fa fa-flag\" aria-hidden=\"true\"></i> Priority:</label>\r\n                  <select\r\n                    id=\"taskPriority\" value={priority}\r\n                    onChange={(e) => setPriority(e.target.value)} className=\"form-select\"\r\n                  >\r\n                    <option value=\"\">Default (Medium)</option>\r\n                    <option value=\"low\">Low</option>\r\n                    <option value=\"medium\">Medium</option>\r\n                    <option value=\"high\">High</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"taskDueDate\"><i className=\"fa fa-calendar\" aria-hidden=\"true\"></i> Due Date:</label>\r\n                <input\r\n                  id=\"taskDueDate\" type=\"date\" value={dueDate}\r\n                  onChange={(e) => setDueDate(e.target.value)} className=\"form-input\"\r\n                  min={new Date().toISOString().split(\"T\")[0]} // Optional: prevent past dates\r\n                />\r\n              </div>\r\n              <div className=\"button-row\">\r\n                <button\r\n                  type=\"submit\" className=\"button primary-button\"\r\n                  disabled={isSubmitting || !taskTitle.trim()}\r\n                >\r\n                  <i className={`fa ${isSubmitting ? 'fa-spinner fa-spin' : (isEditing ? 'fa-save' : 'fa-plus-circle')}`}></i>\r\n                  {isSubmitting ? (isEditing ? 'Updating...' : 'Adding...') : (isEditing ? 'Update Task' : 'Add Task')}\r\n                </button>\r\n                {isEditing && (\r\n                  <button type=\"button\" className=\"button secondary-button\" onClick={clearFullForm} disabled={isSubmitting}>\r\n                    <i className=\"fa fa-times-circle\"></i> Cancel Edit\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </form>\r\n          </section>\r\n\r\n          <section className=\"view-toggle-container card\" aria-label=\"View mode and filters\">\r\n            <div className=\"view-toggle\">\r\n              <button\r\n                className={`view-button ${viewMode === 'list' ? 'active' : ''}`}\r\n                onClick={() => setViewMode('list')}\r\n                disabled={isFetching || mainLoading} // Disable during any fetch/load\r\n                aria-pressed={viewMode === 'list'}\r\n              >\r\n                <i className=\"fa fa-list\"></i> List View\r\n              </button>\r\n              <button\r\n                className={`view-button ${viewMode === 'kanban' ? 'active' : ''}`}\r\n                onClick={() => setViewMode('kanban')}\r\n                disabled={isFetching || mainLoading}\r\n                aria-pressed={viewMode === 'kanban'}\r\n              >\r\n                <i className=\"fa fa-columns\"></i> Kanban View\r\n              </button>\r\n            </div>\r\n            \r\n            <div className=\"filter-controls\">\r\n              <form onSubmit={handleSearchSubmit} className=\"search-form\" role=\"search\">\r\n                <div className=\"search-input-wrapper\">\r\n                  <label htmlFor=\"searchQueryInput\" className=\"visually-hidden\">Search tasks</label>\r\n                  <input\r\n                    id=\"searchQueryInput\" type=\"search\" placeholder=\"Search tasks...\"\r\n                    value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"form-input search-input\"\r\n                  />\r\n                  <button type=\"submit\" className=\"search-button\" disabled={isFetching || mainLoading} aria-label=\"Submit search\">\r\n                    <i className=\"fa fa-search\"></i>\r\n                  </button>\r\n                </div>\r\n              </form>\r\n              <div className=\"advanced-filters\">\r\n                <div className=\"filter-group\">\r\n                  <label htmlFor=\"filterStatus\">Filter by Status:</label>\r\n                  <select\r\n                    id=\"filterStatus\" value={filter}\r\n                    onChange={(e) => { setFilter(e.target.value); setPage(1);}}\r\n                    className=\"form-select filter-select\"\r\n                    disabled={isFetching || mainLoading}\r\n                  >\r\n                    <option value=\"all\">All (Active & Open)</option>\r\n                    <option value=\"active\">Active Tasks</option>\r\n                    <option value=\"completed\">Completed Tasks</option>\r\n                    {/* Add more specific statuses if needed, e.g., 'backlog', 'under-review' */}\r\n                  </select>\r\n                </div>\r\n               {viewMode === 'list' && ( // SortBy is more relevant for list view\r\n                <div className=\"filter-group\">\r\n                    <label htmlFor=\"filterSort\">Sort By:</label>\r\n                    <select\r\n                        id=\"filterSort\" value={sortBy}\r\n                        onChange={(e) => { setSortBy(e.target.value); setPage(1);}}\r\n                        className=\"form-select filter-select\"\r\n                        disabled={isFetching || mainLoading}\r\n                    >\r\n                        <option value=\"createdAt:desc\">Newest First</option>\r\n                        <option value=\"createdAt:asc\">Oldest First</option>\r\n                        <option value=\"title:asc\">Title (A-Z)</option>\r\n                        <option value=\"title:desc\">Title (Z-A)</option>\r\n                        <option value=\"priority:desc\">Priority (High-Low)</option>\r\n                        <option value=\"priority:asc\">Priority (Low-High)</option>\r\n                        <option value=\"dueDate:asc\">Due Date (Earliest)</option>\r\n                        <option value=\"dueDate:desc\">Due Date (Latest)</option>\r\n                    </select>\r\n                </div>\r\n                )}\r\n                <button className=\"button-link clear-filters-button\" onClick={handleClearFiltersAndSearch} disabled={isFetching || mainLoading}>\r\n                  <i className=\"fa fa-times\"></i> Clear Search & Filters\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <div className=\"task-content-container\">\r\n            {mainLoading ? (\r\n              <div className=\"loading-container main-loader\">\r\n                <div className=\"loading-spinner\">\r\n                  <i className=\"fa fa-spinner fa-spin fa-3x\"></i>\r\n                  <p>Loading tasks...</p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                {viewMode === 'kanban' ? (\r\n                  <div className=\"kanban-container\">\r\n                    <TaskKanban\r\n                      tasks={tasks} // Ensure tasks are correctly filtered for Kanban if needed, or Kanban handles all open tasks\r\n                      onEdit={handleEditTask}\r\n                      onDelete={handleDeleteTask}\r\n                      onStatusChange={handleStatusChange}\r\n                      // Pass column order explicitly if TaskKanban expects it\r\n                      // columnOrder={[TASK_STATUSES.BACKLOG, TASK_STATUSES.ACTIVE, TASK_STATUSES.UNDER_REVIEW, TASK_STATUSES.COMPLETED]}\r\n                      isLoading={isFetching} // Pass fetching state for individual column loaders perhaps\r\n                    />\r\n                  </div>\r\n                ) : ( // List View\r\n                  <div className=\"list-container\">\r\n                    <div className=\"task-stats\">\r\n                      <span className=\"task-count total\">\r\n                        <i className=\"fa fa-th-list\"></i> {tasks.length} tasks displayed\r\n                      </span>\r\n                      <span className=\"task-count active\">\r\n                        <i className=\"fa fa-clock-o\"></i> {activeTaskCount} active\r\n                      </span>\r\n                      <span className=\"task-count completed\">\r\n                        <i className=\"fa fa-check-square-o\"></i> {completedTaskCount} completed\r\n                      </span>\r\n                    </div>\r\n                    {tasks.length === 0 ? (\r\n                       <div className=\"empty-state\">\r\n                         <i className=\"fa fa-folder-open-o empty-icon fa-3x\"></i>\r\n                         <p>{searchQuery || filter !== 'all' ? 'No tasks match your current filters.' : 'No tasks yet. Add one above to get started!'}</p>\r\n                         {(searchQuery || filter !== 'all') && (\r\n                            <button className=\"button secondary-button\" onClick={handleClearFiltersAndSearch}>\r\n                                Clear Filters & Search\r\n                            </button>\r\n                         )}\r\n                       </div>\r\n                     ) : (\r\n                        <ul className=\"task-list\">\r\n                            {tasks.map(task => (\r\n                            <Task\r\n                                key={task._id || task.id}\r\n                                task={task}\r\n                                onToggleComplete={() => handleToggleComplete(task._id || task.id)}\r\n                                onEdit={() => handleEditTask(task)}\r\n                                onDelete={() => handleDeleteTask(task._id || task.id)}\r\n                            />\r\n                            ))}\r\n                        </ul>\r\n                    )}\r\n                    {totalPages > 1 && viewMode === 'list' && (\r\n                      <nav className=\"pagination\" aria-label=\"Task list navigation\">\r\n                        <button\r\n                          className=\"pagination-button prev\"\r\n                          onClick={() => handlePageChange(page - 1)}\r\n                          disabled={page === 1 || isFetching}\r\n                          aria-label=\"Go to previous page\"\r\n                        >\r\n                          <i className=\"fa fa-chevron-left\"></i> Previous\r\n                        </button>\r\n                        <div className=\"pagination-info\" aria-live=\"polite\" aria-atomic=\"true\">Page {page} of {totalPages}</div>\r\n                        <button\r\n                          className=\"pagination-button next\"\r\n                          onClick={() => handlePageChange(page + 1)}\r\n                          disabled={page === totalPages || isFetching}\r\n                          aria-label=\"Go to next page\"\r\n                        >\r\n                          Next <i className=\"fa fa-chevron-right\"></i>\r\n                        </button>\r\n                      </nav>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        </main>\r\n\r\n        <footer className=\"app-footer\">\r\n          <p> {new Date().getFullYear()} TaskFlow App. All rights reserved.</p>\r\n          {/* Quick help could be a modal or a small expandable section */}\r\n          {/* <div className=\"quick-help-section\"> ... </div> */}\r\n        </footer>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TaskPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}